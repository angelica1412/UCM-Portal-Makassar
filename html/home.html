<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/home.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/fontawesome.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link rel="icon" type="image/x-icon" href="/aset/Logo Warna - Portal.png" />
  <title>UCM Portal</title>
</head>

<body>
  <!-- NAVBAR -->
  <div class="navbartop">
    <img src="/aset/logo UC.png" class="logoDiatas" />
  </div>
  <div class="fixnav">
    <nav>
      <div class="nav-left">
        <a href="index.html"><img src="/aset/logoNav.png" class="logo" /></a>
        <form action="" method="get" class="search-box">
          <input type="text" class="input" name="search" placeholder="Search Here" required id="search-box" />
          <button type="submit" class="search">
            <i class="fa fa-search"></i>
          </button>
        </form>
      </div>

      <div class="nav-links" id="navLinks">
        <i class="fa fa-times" onclick="hideMenu()" id="close"></i>
        <ul>
          <li>
            <div class="homeicon" id="homeLink">
              <a href="home.html"><i class="fa-solid fa-house"></i></a>
            </div>
            <div class="hometext">
              <a href="home.html">Home</a>
            </div>
          </li>
          <li>
            <div class="addicon" id="addActivityLink">
              <a href="addActivity.html"><i class="fa fa-circle-plus"></i></a>
            </div>
            <div class="addtext">
              <a href="addActivity.html">Add Activity</a>
            </div>
          </li>
          <li>
            <div class="myactivityicon" id="myActivityLink">
              <a href="activity.html"><i class="fa fa-clipboard-list"></i></a>
            </div>
            <div class="myactivitytext">
              <a href="activity.html">My Activity</a>
            </div>
          </li>
          <li>
            <!-- PROFILE -->
            <div class="dropdown">
              <!-- Tampilan profile -->
              <img src="/aset/userProfile.png" alt="Profile Image" onclick="toggleDropdown()">
              <div id="dropdown-content" class="dropdown-content">
                <!-- Konten dropdown -->
                <div class="card2">
                  <div class="card-border-top">
                  </div>
                  <div class="img">
                  </div>
                  <span> Person</span>
                  <p class="job"> Job Title</p>
                  <button id="btnlogout" onclick="show('popup')"> Log Out
                  </button>
                </div>
              </div>
            </div>

          </li>
        </ul>
      </div>
      <!-- HAMBURGER -->
      <i class="fa fa-bars" onclick="showMenu()" id="humbuger"></i>
    </nav>
  </div> 

      <!-- <div class="column">
          <div class="card">
            <img src="/aset/infinity.png" />
            <p class="judul">Infinity Generasi Ke - 3</p>
            <p class="tutup">Berakhir pada : 30 September 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div>

        <div class="column">
          <div class="card">
            <img src="/aset/fdu.png" />
            <p class="judul">Faith Diversity Unity</p>
            <p class="tutup">Berakhir pada : 12 Desembar 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div>

        <div class="column">
          <div class="card">
            <img src="/aset/fdu.png" />
            <p class="judul">Faith Diversity Unity</p>
            <p class="tutup">Berakhir pada : 12 Desembar 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div>

        <div class="column">
          <div class="card">
            <img src="/aset/fdu.png" />
            <p class="judul">Faith Diversity Unity</p>
            <p class="tutup">Berakhir pada : 12 Desembar 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div>
        <div class="column">
          <div class="card">
            <img src="/aset/fdu.png" />
            <p class="judul">Faith Diversity Unity</p>
            <p class="tutup">Berakhir pada : 12 Desembar 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div> -->

  <!-- POP UP LOGOUT -->
  <div class="popup" id="popup">
    <div class="logocancel">
      <a href="#" onclick="hide('popup')"><i class="fa-solid fa-xmark" id="cancel"></i></a>
    </div>
    <div class="judulLogout">
      Logout
    </div>
    <div class="pertanyaankeluar">Apakah Anda Yakin Untuk Keluar Dari Sistem?
    </div>
    <div class="buttonlog">
      <a href="index.html"><button id="ya">Keluar</button></a>
      <button id="tidak" href="#" onclick="hide('popup')">Tidak</button>
    </div>
  </div>

  <!-- Pop Up Selengkapnya -->
  <!-- <div class="bungkus">
    <div class="popupmore" id="popupmore">
      <div class="judullogo">
        <div class="logopop">
          <img src="/aset/fdu.png" class="logokegiatan">
        </div>
  
        <div class="judulpop">
          <p>Open Recruitment Oweek</p>
        </div>

        <div class="deskripsi">

        </div>
      </div>
    </div>
  </div> -->

  <!-- BAGIAN PERTAMA HOME -->
  <div class="gabung">

    <!-- BAGIAN SEARCH -->
    <div class="home1">
      <p class="text1">Saya adalah kandidat</p>
      <p class="text2">CARI ORGANISASI</p>
      <p class="text3">ATAU KEPANITIAAN</p>
      <p class="text4">Telusuri organisasi atau kepanitiaan sesuai</p>
      <p class="text5">dengan minat dan bakat anda</p>
      <button class="cari" id="btn-search" onclick="focusToSearchBox()">
        Cari Sekarang
      </button>
    </div>

    <!-- BAGIAN UNGGAH FORM -->
    <div class="home2">
      <p class="text1">Saya adalah rekruter</p>
      <p class="text2">MEMBUKA REKRUT</p>
      <p class="text3">UNTUK MAHASISWA</p>
      <p class="text4">
        Membuat penerimaan anggota organisasi maupun kegiatan
      </p>
      <p class="text5">kepada mahasiswa</p>
      <a href="addActivity.html"><button class="unggah">Unggah</button></a>
    </div>
  </div>

  <!-- SEDANG BERLANGSUNG -->
  <!-- <div class="bagian1">
    <div class="bagian1atas">
      <p class="text12">Sedang Berlangsung</p>
      <p class="text22">
        Temukan organisasi maupun kepanitiaan yang sedang membuka rekrutan
      </p>
      <p class="text32">di kampus UC Makassar</p>
    </div>
  </div> -->

  <div class="bagian2">
    <div class="row" id="latest">
      Data form terbaru akan dimasukkan di sini
    </div>
  </div>

  <!-- CARA DAFTAR -->
  <div class="bagian4">
    <div class="bagianjudul">
      <p class="caramendaftar">Cara Mendaftar</p>
      <p class="descdaftar">
        Berikut merupakan langkah-langkah yang dapat anda ikuti dalam
        mendaftar
      </p>
      <p class="lanjutandaftar">sebuah kepanitiaan ataupun organisasi</p>
      <img src="/aset/cari.png" />
    </div>
  </div>


  <!-- BAGIAN AKHIR HOME -->
  <div class="bagian6">
    <div class="bagianjudul3">
      <p class="pilihan">Ingin membuka kepanitiaan atau organisasi?</p>
      <a href="addActivity.html"><button class="unggah2">Unggah</button></a>
    </div>
  </div>

  <!-- BAGIAN FOOTER -->
  <section class="footer">
    <div class="nama">
      <img src="/aset/LogoPanjang.png" class="logoPanjang">
      <p>Developed by</p>
    </div>
    <ul class="list">
      <li>
        <a href="#">Edgar Tanamal</a>
      </li>
      <li>
        <a href="#">Maria Angelica</a>
      </li>
      <li>
        <a href="#">Putra Taufik</a>
      </li>
      <li>
        <a href="#">Rigel Tandilolo</a>
      </li>
    </ul>
    <p class="jurusantahun">IMT UC Makassar @ 2023</p>
  </section>

  <script src="/js/home.js"></script>
  <script src="/js/profileJS.js"></script>
  <script>
    function getAcceptedForms() {
      var apiUrl = "http://localhost:4000/ucmportal/form/accepted"; // Ganti dengan URL API yang sesuai

      // Lakukan request AJAX ke API
      var xhr = new XMLHttpRequest();
      xhr.open("GET", apiUrl, true);
      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
          var acceptedForms = JSON.parse(xhr.responseText);

          // Panggil fungsi untuk memproses dan menampilkan form yang diterima
          processAcceptedForms(acceptedForms);
        }
      };
      xhr.send();
    }

    function processAcceptedForms(acceptedForms) {
      var latestContainer = document.getElementById("latest");

      // Kosongkan kontainer
      latestContainer.innerHTML = "";

      var counter = 0; // Counter for limiting the forms to 6

      // Mengecek apakah ada data form terbaru
      if (acceptedForms.length > 0) {
        acceptedForms.forEach(function (form) {
          if (counter >= 6) {
            return; // Exit the loop if 6 forms have been added
          }

          // Membuat elemen HTML untuk form
          var card = document.createElement("div");
          card.className = "column";
          card.innerHTML = `
            <div class="card">
              <img src="data:image/jpeg;base64,${form.logo}" />
              <p class="judul">${form.title}</p>
              <p class="tutup">${form.type}</p>
              <button id="selengkapnya" onclick="show('popupmore')">Selengkapnya</button>
            </div>
          `;
          // Tambahkan elemen form ke dalam kontainer
          latestContainer.appendChild(card);

          counter++; // Increment the counter
        });
      } else {
        latestContainer.innerHTML = "Tidak ada data form terbaru.";
      }
    }

    // Panggil fungsi untuk mengambil data form terbaru dari API
    getAcceptedForms();
  </script>
</body>

</html>