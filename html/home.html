<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/home.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/fontawesome.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link rel="icon" type="image/x-icon" href="/aset/Logo Warna - Portal.png" />
  <title>UC Makassar Portal</title>
</head>

<body>
  <!-- NAVBAR -->
  <div class="navbartop">
    <img src="/aset/logo UC.png" class="logoDiatas" />
  </div>
  <div class="fixnav">
    <nav>
      <div class="nav-left">
        <a href="index.html"><img src="/aset/logoNav.png" class="logo" /></a>
        <form action="" method="get" class="search-box" id="searchForm">
          <input type="text" class="input" name="search" placeholder="Search Here" autocomplete="off" required
            id="search-box" />
          <button type="submit" class="search">
            <i class="fa fa-search"></i>
          </button>
        </form>
        <div id="searchResults"></div>
      </div>

      <div class="nav-links" id="navLinks">
        <i class="fa fa-times" onclick="hideMenu()" id="close"></i>
        <ul>
          <li>
            <div class="homeicon">
              <a href="home.html"><i class="fa-solid fa-house"></i></a>
            </div>
            <div class="hometext">
              <a href="home.html">Home</a>
            </div>
          </li>
          <li>
            <div class="addicon">
              <a href="addActivity.html"><i class="fa fa-circle-plus"></i></a>
            </div>
            <div class="addtext">
              <a href="addActivity.html">Add Activity</a>
            </div>
          </li>
          <li>
            <div class="myactivityicon">
              <a href="activity.html"><i class="fa fa-clipboard-list"></i></a>
            </div>
            <div class="myactivitytext">
              <a href="activity.html">My Activity</a>
            </div>
          </li>
          <li>
            <!-- PROFILE -->
            <div class="dropdown">
              <!-- Tampilan profile -->
              <img src="/aset/userProfile.png" alt="Profile Image" onclick="toggleDropdown()">
              <div id="dropdown-content" class="dropdown-content">
                <!-- Konten dropdown -->
                <div class="card2">
                  <div class="card-border-top">
                  </div>
                  <div class="img">
                  </div>
                  <span id="name"> Person</span>
                  <p class="job" id="major"> Job Title</p>
                  <button id="btnlogout" onclick="show('popup')"> Log Out
                  </button>
                </div>
              </div>
            </div>

          </li>
        </ul>
      </div>
      <!-- HAMBURGER -->
      <i class="fa fa-bars" onclick="showMenu()" id="humbuger"></i>
    </nav>
  </div>

  <!-- <div class="column">
          <div class="card">
            <img src="/aset/infinity.png" />
            <p class="judul">Infinity Generasi Ke - 3</p>
            <p class="tutup">Berakhir pada : 30 September 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div>

        <div class="column">
          <div class="card">
            <img src="/aset/fdu.png" />
            <p class="judul">Faith Diversity Unity</p>
            <p class="tutup">Berakhir pada : 12 Desembar 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div>

        <div class="column">
          <div class="card">
            <img src="/aset/fdu.png" />
            <p class="judul">Faith Diversity Unity</p>
            <p class="tutup">Berakhir pada : 12 Desembar 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div>

        <div class="column">
          <div class="card">
            <img src="/aset/fdu.png" />
            <p class="judul">Faith Diversity Unity</p>
            <p class="tutup">Berakhir pada : 12 Desembar 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div>
        <div class="column">
          <div class="card">
            <img src="/aset/fdu.png" />
            <p class="judul">Faith Diversity Unity</p>
            <p class="tutup">Berakhir pada : 12 Desembar 2023</p>
            <button>Selengkapnya</button>
          </div>
        </div> -->

  <!-- POP UP LOGOUT -->
  <div class="popup" id="popup">
    <div class="logocancel">
      <a href="#" onclick="hide('popup')"><i class="fa-solid fa-xmark" id="cancel"></i></a>
    </div>
    <div class="judulLogout">
      Logout
    </div>
    <div class="pertanyaankeluar">Apakah Anda Yakin Untuk Keluar Dari Sistem?
    </div>
    <div class="buttonlog">
      <a href="index.html"><button id="ya">Keluar</button></a>
      <button id="tidak" href="#" onclick="hide('popup')">Tidak</button>
    </div>
  </div>

  <!-- Pop Up Selengkapnya -->
  <div class="bungkus" id="popupmore">
    <div class="popupmore">
      <div class="log0Close">
        <a href="#" onclick="hide('popupmore')"><i class="fa-solid fa-xmark" id="closeMore"></i></a>
      </div>
      <div class="judullogo" id="judulLogo">
        <div class="logopop">
          <img src="/aset/fdu.png" id="logokegiatan">
        </div>
  
        <div class="judulpop" id="judulAcaraPop">
          <p>Open Recruitment Oweek</p>
        </div>

      </div>

      <div class="infokegiatan">
        <div class="jeniskegiatan">
            <p class="atasjenis">Jenis Kegiatan :</p>
            <p class="jawabanjenis" id="jenisKegiatan"></p>
        </div>

        <div class="tanggal">
            <p class="atastanggal">Tanggal :</p>
            <p class="tanggalmulai" id="tanggalMulai">Mulai : </p>
            <p class="tanggalakhir" id="tanggalAkhir">Akhir : </p>
        </div>

        <div class="deskripsi">
            <p class="atasdeskripsi">Deskripsi :</p>
            <div class="descinfo" id="deskripsi">
            </div>
        </div>

        <div class="logo1">
            <p class="atasjenis">Logo Kegiatan </p>
            <img src="" id="img">
        </div>

        <div class="buttonApply">
          <a href="#"><button id="apply">Apply</button></a>
        </div>

 
      </div>
    </div>
  </div>

  <!-- BAGIAN PERTAMA HOME -->
  <div class="gabung">

    <!-- BAGIAN SEARCH -->
    <div class="home1">
      <p class="text1">Saya adalah kandidat</p>
      <p class="text2">CARI ORGANISASI</p>
      <p class="text3">ATAU KEPANITIAAN</p>
      <p class="text4">Telusuri organisasi atau kepanitiaan sesuai</p>
      <p class="text5">dengan minat dan bakat anda</p>
      <button class="cari" id="btn-search" onclick="focusToSearchBox()">
        Cari Sekarang
      </button>
    </div>

    <!-- BAGIAN UNGGAH FORM -->
    <div class="home2">
      <p class="text1">Saya adalah rekruter</p>
      <p class="text2">MEMBUKA REKRUT</p>
      <p class="text3">UNTUK MAHASISWA</p>
      <p class="text4">
        Membuat penerimaan anggota organisasi
      </p>
      <p class="text5">maupun kegiatan kepada mahasiswa</p>
      <a href="addActivity.html"><button class="unggah">Unggah</button></a>
    </div>
  </div>


  <div class="bagian2" id="bagian2">
    <div class="row" id="latest">
      Data form terbaru akan dimasukkan di sini
    </div>
  </div>

  <!-- CARA DAFTAR -->
  <div class="bagian4">
    <div class="bagianjudul">
      <p class="caramendaftar">Cara Mendaftar</p>
      <p class="descdaftar">
        Berikut merupakan langkah-langkah yang dapat anda ikuti dalam
        mendaftar sebuah kepanitiaan ataupun organisasi
      </p>
      <img src="/aset/cari.png" />
    </div>
  </div>


  <!-- BAGIAN AKHIR HOME -->
  <div class="bagian6">
    <div class="bagianjudul3">
      <p class="pilihan">Ingin membuka kepanitiaan atau organisasi?</p>
      <a href="addActivity.html"><button class="unggah2">Unggah</button></a>
    </div>
  </div>

  <!-- BAGIAN FOOTER -->
  <section class="footer">
    <div class="nama">
      <img src="/aset/LogoPanjang.png" class="logoPanjang">
      <p>Developed by</p>
    </div>
    <ul class="list">
      <li>
        <a href="#">Edgar Tanamal</a>
      </li>
      <li>
        <a href="#">Maria Angelica</a>
      </li>
      <li>
        <a href="#">Putra Taufik</a>
      </li>
      <li>
        <a href="#">Rigel Tandilolo</a>
      </li>
    </ul>
    <p class="jurusantahun">IMT UC Makassar @ 2023</p>
  </section>

  <script src="/js/home.js"></script>
  <script src="/js/profileJS.js"></script>
  <script>
    function getAcceptedForms() {
      var apiUrl = "http://localhost:4000/ucmportal/accepted"; // Ganti dengan URL API yang sesuai

      // Lakukan request AJAX ke API
      var xhr = new XMLHttpRequest();
      xhr.open("GET", apiUrl, true);
      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
          var acceptedForms = JSON.parse(xhr.responseText);

          // Panggil fungsi untuk memproses dan menampilkan form yang diterima
          processAcceptedForms(acceptedForms);
        }
      };
      xhr.send();
    }

    function processAcceptedForms(acceptedForms) {
      var latestContainer = document.getElementById("latest");

      // Kosongkan kontainer
      latestContainer.innerHTML = "";

      var counter = 0; // Counter for limiting the forms to 6

      // Mengecek apakah ada data form terbaru
      if (acceptedForms.length > 0) {
        acceptedForms.forEach(function (form) {

          // Membuat elemen HTML untuk form
          var card = document.createElement("div");
          card.className = "column";
          card.innerHTML = `
  <div class="card" id="${form.title.replace(/\s/g, '')}">
    <img src="data:image/jpeg;base64,${form.logo}" />
    <p class="judul">${form.title}</p>
    <p class="tutup">${form.type}</p>
    <button class="selengkapnya" onclick="show('popupmore')">Selengkapnya</button>
  </div>
`;
          // Tambahkan elemen form ke dalam kontainer
          latestContainer.appendChild(card);

          counter++; // Increment the counter
        });
      } else {
        latestContainer.innerHTML = "Tidak ada data form terbaru.";
      }
    }

    // Panggil fungsi untuk mengambil data form terbaru dari API
    getAcceptedForms();
  </script>

  <script>
    function search() {
      let searchQuery = document.getElementById('search-box').value;

      // If the input is empty, clear the search results and return
      if (!searchQuery.trim()) {
        document.getElementById('searchResults').innerHTML = '';
        return;
      }

      let xhr = new XMLHttpRequest();
      xhr.open('GET', 'http://localhost:4000/ucmportal/searchform/' + searchQuery, true);

      xhr.onload = function () {
        if (this.status == 200) {
          let results = JSON.parse(this.responseText);
          let output = '<ul class="search-results">';

          for (let i in results) {
            output += `<li class="search-result-link" data-target="${results[i].replace(/\s/g, '')}"> <a > ${results[i]} </a> </li>`;
          }

          output += '</ul>';
          document.getElementById('searchResults').innerHTML = output;

          // Add event listeners to the new links
          document.querySelectorAll('.search-result-link').forEach(function (link) {
            link.addEventListener('click', function (e) {
              e.preventDefault(); // Prevent the default behaviour

              var targetId = this.dataset.target;
              var targetElement = document.getElementById(targetId);

              if (targetElement) {
                var viewportHeight = window.innerHeight;
                var targetElementRect = targetElement.getBoundingClientRect();

                // Calculate the new scroll position
                var newScrollPosition = window.pageYOffset + targetElementRect.top - viewportHeight / 2 + targetElementRect.height / 2;

                // Change the scroll position
                window.scrollTo({ top: newScrollPosition, behavior: 'smooth' });
              }
            });
          });
        }
      }
      xhr.send();
    }

    document.getElementById('search-box').addEventListener('input', search);

    // prevent form submission when the search button is clicked
    document.getElementById('searchForm').addEventListener('submit', function (e) {
      e.preventDefault();
      search();
    });
  </script>






</body>

</html>